# ğŸ› ï¸ Diagnostic GitHub Actions Runner - Self-Hosted

Ce fichier regroupe toutes les Ã©tapes de diagnostic et de rÃ©solution liÃ©es aux problÃ¨mes rencontrÃ©s avec un runner GitHub Actions auto-hÃ©bergÃ© (self-hosted), notamment sous WSL/Linux.

---

## âœ… 1. VÃ©rifier si le runner tourne

```bash
sudo systemctl status actions.runner.<nom_du_runner>.service
```

> Exemple :
```bash
sudo systemctl status actions.runner.jtanouti6-data_engineering_pipeline.WIN-R8C3MG81CU8.service
```

- ğŸ”µ `active (running)` â†’ OK
- ğŸ”´ `failed` â†’ voir les logs

---

## âœ… 2. VÃ©rifier que le script `runsvc.sh` existe et est exÃ©cutable

```bash
ls -l ~/data_engineer_pipeline/actions-runner/runsvc.sh
chmod +x ~/data_engineer_pipeline/actions-runner/runsvc.sh
```

---

## âœ… 3. VÃ©rifier le contenu du fichier .service

```bash
sudo nano /etc/systemd/system/actions.runner.jtanouti6-data_engineering_pipeline.WIN-R8C3MG81CU8.service
```

### Corriger les chemins si besoin :

```ini
ExecStart=/home/administrateur/data_engineer_pipeline/actions-runner/runsvc.sh
WorkingDirectory=/home/administrateur/data_engineer_pipeline/actions-runner
User=administrateur
```

---

## âœ… 4. RedÃ©marrer systemd aprÃ¨s modification

```bash
sudo systemctl daemon-reload
sudo systemctl restart actions.runner.<nom_du_runner>.service
```

---

## âœ… 5. Supprimer un service systemd obsolÃ¨te

```bash
sudo rm /etc/systemd/system/actions.runner.jtanouti6-data_engineering_pipeline.WIN-R8C3MG81CU8.service
sudo systemctl daemon-reload
```

---

## âœ… 6. Supprimer complÃ¨tement un ancien runner

```bash
cd ~/data_engineer_pipeline/actions-runner
./config.sh remove --token <TON_TOKEN_SECRET>
```

---

## âœ… 7. RÃ©installer un runner proprement

```bash
mkdir actions-runner && cd actions-runner
curl -o actions-runner-linux-x64-2.327.1.tar.gz -L https://github.com/actions/runner/releases/download/v2.327.1/actions-runner-linux-x64-2.327.1.tar.gz
tar xzf actions-runner-linux-x64-2.327.1.tar.gz
```

---

## âœ… 8. Reconfigurer le runner

```bash
./config.sh --url https://github.com/jtanouti6/data_engineering_pipeline --token <TON_TOKEN_SECRET>
```

---

## âœ… 9. RÃ©installer le service systemd

```bash
./svc.sh install
./svc.sh start
```

Et vÃ©rifier :
```bash
sudo systemctl status actions.runner.jtanouti6-data_engineering_pipeline.WIN-R8C3MG81CU8.service
```

---

## âœ… 10. Supprimer le runner depuis GitHub (interface)

Aller dans :
```
https://github.com/jtanouti6/data_engineering_pipeline/settings/actions/runners
```
â†’ Supprimer manuellement les runners hors ligne (ğŸ—‘ï¸)

